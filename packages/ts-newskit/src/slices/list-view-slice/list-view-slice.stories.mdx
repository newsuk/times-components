import { Meta, Story, Props } from '@storybook/addon-docs'
import { GridOverlay, TCThemeProvider, TimesWebThemes } from '../../utils/index.tsx';
import { ListViewSlice } from "./";
import { leadArticles } from './data.json';
import { action } from '@storybook/addon-actions';
import { sortByDatePublished } from './utils/index';
import { SectionAd } from './utils/ads';

<Meta
  title="Newskit Slices/List View Slice"
  component={ListViewSlice}
/>

# ListViewSlice component
The `ListViewSlice` component is used to display the main story, supplementary articles and comment quotes.
It is comprised of the `leadArticles`, `ArticleListItem`, and `CommentCard` slice components.

This takes in a series of props, as below, to display the part of the slices.

## Props
<Props of={ListViewSlice} />

## Code Example
`<ListViewSlice {...{ leadArticles }} />`

## View Component
Please click the 'Canvas' tab for a better viewing experience, where you can update the props and review at the different breakpoints by clicking the preview icon and selecting from our list of pre-defined breakpoints (XS, SM, MD, LG and XL).

export const ListViewSliceStory = ({ leadArticles, theme, gridOverlay, clickHandler, articleWithAdSlot, currentPage, itemsPerPage, totalItems, isLoading, handlePageChange, onPageChange, StickyAd, SectionAd, SectionAdMob }) => (
  <TCThemeProvider theme={theme}>
    <>
      <GridOverlay show={gridOverlay} />
      <ListViewSlice {...{ leadArticles, clickHandler, articleWithAdSlot, currentPage, itemsPerPage, totalItems, isLoading, handlePageChange, onPageChange, StickyAd, SectionAd, SectionAdMob }} />
    </>
  </TCThemeProvider>
);
ListViewSliceStory.args = {
  theme: 'TimesWebLightTheme',
};

<Story 
  name="ListViewSlice"
  args={{
    leadArticles: leadArticles.sort((a, b) => sortByDatePublished(a, b, 'dsc')),
    clickHandler: action("ClickHandler"),
    itemsPerPage: 5,
    totalItems: 10,
    handlePageChange: (page) => {
      history.pushState(
          null,
          '',
          `${window.location.pathname}?page=${page}`
      );
      alert(`PAGINATION CLICK: ${window.location.pathname}?page=${page}`)
    },
    onPageChange: () => {
      console.log("ON PAGE CHANGE")
    },
    StickyAd: SectionAd,
    SectionAd: SectionAd,
    SectionAdMob: SectionAd
  }}
  argTypes={{
    theme: {
      options: Object.keys(TimesWebThemes),
      mapping: TimesWebThemes,
      control: { type: 'select' },
    },
    gridOverlay: {
      control: { type: 'boolean' },
    },
  }}
>
  {ListViewSliceStory.bind({})}
</Story>
