// Jest Snapshot v1, https://goo.gl/fbAQLP

exports[`1. Advert 1`] = `
<View>
  <View>
    <View>
      <RCTWebView
        injectedJavaScript="window.reactBridgePostMessage = window.postMessage; window.postMessage = String(Object.hasOwnProperty).replace('hasOwnProperty', 'postMessage');"
        messagingEnabled={true}
        scalesPageToFit={true}
        source={
          Object {
            "baseUrl": "https://www.thetimes.co.uk/",
            "html": "
      <html>
        <head>
        <meta name=\\"viewport\\" content=\\"width=0,height=0,initial-scale=1,user-scalable=no\\">
        <style>
          html, body {
            height: 100%;
            width: 100%;
            margin: 0;
            padding: 0;
            overflow: hidden;
          }
        </style>
        </head>
        <body>
          <div></div>
          <script>
            (function webviewEventCallbackSetup(options){var window=options.window;window.eventCallback=function(type,detail){window.setTimeout(function(){var method=window.reactBridgePostMessage||window.postMessage;method(JSON.stringify({isTngMessage:true,type:type,detail:detail}),\\"*\\");},300);};window.addEventListener(\\"error\\",function(ev){var file=(ev.filename||\\"\\").substring(0,100);window.eventCallback(\\"error\\",\\"msg=\\"+(ev.message||\\"\\")+\\", file=\\"+file+\\", line=\\"+(ev.lineno||\\"\\")+\\", col=\\"+(ev.colno||\\"\\"));});window.console.error=function(){for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}window.eventCallback(\\"error\\",args.join(\\"\\\\n\\"));};})(window);
          </script>
          <script>
          (function adInit(args){var el=args.el,data=args.data,platform=args.platform,eventCallback=args.eventCallback,window=args.window;var document=window.document,setTimeout=window.setTimeout,Promise=window.Promise;var scriptsInserted={};var initCalled=false;var initialiser={utils:{loadScript:function loadScript(scriptUri,timeout){var _this=this;if(scriptsInserted[scriptUri]){throw new Error(\\"Inserting \\\\\\"\\"+scriptUri+\\"\\\\\\" twice.\\");}scriptsInserted[scriptUri]=true;return new Promise(function(resolve,reject){_this.createScriptElement(scriptUri,function(){resolve();},function(){reject(new Error(\\"load error for \\"+scriptUri));});if(timeout){setTimeout(reject,timeout,new Error(\\"timeout for \\"+scriptUri));}});},createScriptElement:function createScriptElement(scriptUri,onLoad,onError){try{var script=document.createElement(\\"script\\");script.type=\\"text/javascript\\";script.defer=true;if(onLoad)script.addEventListener(\\"load\\",onLoad);if(onError)script.addEventListener(\\"error\\",onError);script.src=scriptUri;document.head.appendChild(script);}catch(e){eventCallback(\\"log\\",\\"Could not insert script \\\\\\"\\"+scriptUri+\\"\\\\\\" (\\"+e+\\") - could be caused by ad blocker\\");}},breakpoints:{small:\\"(max-width: 767px)\\",medium:\\"(min-width: 768px) and (max-width: 1023px)\\",wide:\\"(min-width: 1024px) and (max-width: 1319px)\\",huge:\\"(min-width: 1320px)\\"}},gpt:{setupAsync:function setupAsync(utils){window.googletag=window.googletag||{};window.googletag.cmd=window.googletag.cmd||[];this.scheduleSetPageTargetingValues(data.pageTargeting);this.scheduleAction(function(){var pubads=window.googletag.pubads();pubads.disableInitialLoad();pubads.enableSingleRequest();window.googletag.enableServices();});return utils.loadScript(\\"https://www.googletagservices.com/tag/js/gpt.js\\");},scheduleAction:function scheduleAction(action){window.googletag.cmd.push(action);},scheduleSetPageTargetingValues:function scheduleSetPageTargetingValues(keyValuePairs){this.scheduleAction(function(){var pubads=window.googletag.pubads();Object.keys(keyValuePairs).forEach(function(key){pubads.setTargeting(key,keyValuePairs[key]);});});},doSlotAdSetup:function doSlotAdSetup(){var slotConfig=data.config,networkId=data.networkId,adUnit=data.adUnit,section=data.section,slotTargeting=data.slotTargeting;this.scheduleAction(function(){var adUnitPath=\\"/\\"+networkId+\\"/\\"+adUnit+\\"/\\"+section;var slotName=slotConfig.slotName,sizes=slotConfig.sizes,mappings=slotConfig.mappings;var slot=window.googletag.defineSlot(adUnitPath,sizes,slotName);if(!slot){throw new Error(\\"Ad slot \\"+slotName+\\" \\"+adUnitPath+\\" could not be defined, probably it was already defined\\");}slot.addService(window.googletag.pubads());el.id=\\"wrapper-\\"+slotName;el.innerHTML=\\"<div id=\\\\\\"\\"+slotName+\\"\\\\\\"></div>\\";el.style.display=\\"flex\\";el.style.alignItems=\\"center\\";el.style.justifyContent=\\"center\\";el.style.margin=\\"0 auto\\";el.style.height=\\"100%\\";var gptMapping=window.googletag.sizeMapping();mappings.forEach(function(size){return gptMapping.addSize([size.width,size.height],size.sizes);});slot.defineSizeMapping(gptMapping.build());Object.keys(slotTargeting||[]).forEach(function(key){return slot.setTargeting(key,slotTargeting[key]);});var randomTestingGroup=Math.floor(Math.random()*10).toString();slot.setTargeting(\\"timestestgroup\\",randomTestingGroup);slot.setTargeting(\\"pos\\",slotName);window.googletag.display(slotName);window.googletag.pubads().refresh();});},waitUntilReady:function waitUntilReady(){var _this2=this;return new Promise(function(resolve){return _this2.scheduleAction(function(){resolve();});});},displayAds:function displayAds(){window.googletag.pubads().refresh();},destroySlots:function destroySlots(){window.googletag.destroySlots();}},prebid:{setupAsync:function setupAsync(prebidConfig,utils){this.createPbjsGlobals();var scriptPromises=[utils.loadScript(\\"https://www.thetimes.co.uk/d/js/vendor/prebid.min-4812861170.js\\")];if(prebidConfig.bidders.amazon&&prebidConfig.bidders.amazon.accountId){scriptPromises.push(utils.loadScript(\\"https://c.amazon-adsystem.com/aax2/apstag.js\\"));}return Promise.all(scriptPromises);},createPbjsGlobals:function createPbjsGlobals(){window.pbjs=window.pbjs||{};window.pbjs.que=window.pbjs.que||[];},requestBidsAsync:function requestBidsAsync(prebidConfig,slots,networkId,adUnit,section,gpt){var amazonAccountID=prebidConfig.bidders.amazon&&prebidConfig.bidders.amazon.accountId;var biddingActions=[];window.pbjs.bidderTimeout=prebidConfig.timeout;window.pbjs.bidderSettings=prebidConfig.bidderSettings(prebidConfig);if(amazonAccountID){this.setupApstag(amazonAccountID,prebidConfig.timeout);biddingActions.push(this.scheduleRequestAmazonBids(slots,amazonAccountID,networkId,adUnit,section));}biddingActions.push(gpt.waitUntilReady(),this.requestPrebidBids(slots));return Promise.all(biddingActions);},setupApstag:function setupApstag(amazonAccountID,timeout){window.apstag={init:function init(){this.addToQueue(\\"i\\",arguments);},fetchBids:function fetchBids(){this.addToQueue(\\"f\\",arguments);},setDisplayBids:function setDisplayBids(){},targetingKeys:function targetingKeys(){return[];},addToQueue:function addToQueue(action,d){this._Q.push([action,d]);},_Q:[]};window.apstag.init({pubID:amazonAccountID,adServer:\\"googletag\\",bidTimeout:timeout});},getAmazonConfig:function getAmazonConfig(adSlots,networkId,adUnit,section){var adUnitPathParts=[networkId,adUnit];if(section){adUnitPathParts.push(section);}var adUnitPath=this.getAdUnitPath(adUnitPathParts);return adSlots.map(function(slot){return{slotID:slot.code,slotName:adUnitPath,sizes:slot.sizes};});},getAdUnitPath:function getAdUnitPath(params){return params.reduce(function(acc,cur,index){return index===1?\\"/\\"+acc+\\"/\\"+cur:acc+\\"/\\"+cur;});},scheduleRequestAmazonBids:function scheduleRequestAmazonBids(adsSlots,amazonPudID,networkId,adUnit,section){var _this3=this;return new Promise(function(resolve){var amazonSlots=_this3.getAmazonConfig(adsSlots,networkId,adUnit,section);window.apstag.fetchBids({slots:amazonSlots},function(aBids){resolve(aBids);});});},schedulePrebidAction:function schedulePrebidAction(action){window.pbjs.que.push(action);},setAdUnits:function setAdUnits(adsSlots){this.schedulePrebidAction(function(){adsSlots.forEach(function(slot){return window.pbjs.removeAdUnit(slot.code);});window.pbjs.addAdUnits(adsSlots);});},requestPrebidBids:function requestPrebidBids(slots){var _this4=this;return new Promise(function(resolve){_this4.schedulePrebidAction(function(){_this4.setAdUnits(slots);window.pbjs.requestBids({bidsBackHandler:function bidsBackHandler(bids){resolve(bids);}});});});},applyPrebidTargeting:function applyPrebidTargeting(){window.pbjs.enableSendAllBids();window.pbjs.setTargetingForGPTAsync();},applyAmazonTargeting:function applyAmazonTargeting(){if(window.apstag){window.apstag.setDisplayBids();}}},grapeshot:{setupAsync:function setupAsync(gpt,utils){var grapeshotUrl=\\"https://newscorp.grapeshot.co.uk/thetimes/channels.cgi?url=\\"+encodeURIComponent(data.contextUrl);return utils.loadScript(grapeshotUrl,1000).then(function(){gpt.scheduleSetPageTargetingValues({gs_cat:window.gs_channels});}).catch(function(){});}},doPageAdSetupAsync:function doPageAdSetupAsync(){var _this5=this;var networkId=data.networkId,adUnit=data.adUnit,prebidConfig=data.prebidConfig,section=data.section,slots=data.slots;var parallelActions=[this.gpt.setupAsync(this.utils),this.grapeshot.setupAsync(this.gpt,this.utils)];var enablePrebidding=platform===\\"web\\";if(enablePrebidding){parallelActions.push(this.prebid.setupAsync(prebidConfig,this.utils),this.prebid.requestBidsAsync(prebidConfig,slots,networkId,adUnit,section,this.gpt));}if(platform===\\"web\\"&&window.matchMedia){Object.keys(this.utils.breakpoints).forEach(function(b){window.matchMedia(_this5.utils.breakpoints[b]).addListener(_this5.handleBreakpointChange.bind(_this5,b));});}return Promise.all(parallelActions).then(this.gpt.waitUntilReady.bind(this.gpt)).then(this.finaliseAds.bind(this,enablePrebidding));},handleBreakpointChange:function handleBreakpointChange(breakpoint,mql){var _this6=this;if(mql.matches){this.gpt.scheduleSetPageTargetingValues({breakpoint:breakpoint,refresh:\\"true\\"});this.gpt.scheduleAction(function(){return _this6.gpt.displayAds();});}},finaliseAds:function finaliseAds(enablePrebidding){if(enablePrebidding){this.prebid.applyPrebidTargeting();this.prebid.applyAmazonTargeting();}},destroySlots:function destroySlots(){this.gpt.destroySlots();},init:function init(){if(initCalled){throw new Error(\\"init() has already been called\\");}initCalled=true;if(!window.initCalled){window.initCalled=true;this.doPageAdSetupAsync();}this.gpt.doSlotAdSetup();this.gpt.waitUntilReady().then(function(){eventCallback(\\"renderComplete\\");});}};return initialiser;})({
            el: document.getElementsByTagName(\\"div\\")[0],
            eventCallback: eventCallback,
            data: {\\"config\\":{\\"slotName\\":\\"header\\",\\"sizes\\":[[320,50],[320,48],[300,50]],\\"maxSizes\\":{\\"height\\":50,\\"width\\":320},\\"mappings\\":[{\\"height\\":0,\\"sizes\\":[],\\"width\\":0},{\\"height\\":100,\\"sizes\\":[[320,50],[320,48],[300,50]],\\"width\\":300},{\\"height\\":90,\\"sizes\\":[[728,90]],\\"width\\":768},{\\"height\\":250,\\"sizes\\":[[970,250],[970,90],[728,90]],\\"width\\":1024}]},\\"prebidConfig\\":{\\"bidders\\":{\\"appnexus\\":{\\"placementId\\":\\"5823281\\"},\\"rubicon\\":{\\"accountId\\":\\"14062\\",\\"siteId\\":\\"70608\\",\\"zoneId\\":\\"335918\\"},\\"amazon\\":{\\"accountId\\":\\"3360\\"},\\"indexExchange\\":{\\"siteId\\":\\"188830\\"}},\\"timeout\\":3000,\\"minPrice\\":0.01,\\"maxBid\\":15,\\"bucketSize\\":0.25},\\"slots\\":[{\\"code\\":\\"ad-header\\",\\"sizes\\":[],\\"bids\\":[{\\"bidder\\":\\"appnexus\\",\\"params\\":{\\"placementId\\":\\"5823281\\",\\"section\\":\\"article\\"}},{\\"bidder\\":\\"rubicon\\",\\"params\\":{\\"accountId\\":\\"14062\\",\\"siteId\\":\\"70608\\",\\"zoneId\\":\\"335918\\",\\"inventory\\":{\\"section\\":\\"article\\"}}},{\\"bidder\\":\\"indexExchange\\",\\"params\\":{\\"id\\":\\"ad-header\\",\\"siteID\\":\\"188830\\"}}]},{\\"code\\":\\"ad-article-inline\\",\\"sizes\\":[],\\"bids\\":[{\\"bidder\\":\\"appnexus\\",\\"params\\":{\\"placementId\\":\\"5823281\\",\\"section\\":\\"article\\"}},{\\"bidder\\":\\"rubicon\\",\\"params\\":{\\"accountId\\":\\"14062\\",\\"siteId\\":\\"70608\\",\\"zoneId\\":\\"335918\\",\\"inventory\\":{\\"section\\":\\"article\\"}}},{\\"bidder\\":\\"indexExchange\\",\\"params\\":{\\"id\\":\\"ad-article-inline\\",\\"siteID\\":\\"188830\\"}}]}],\\"slotName\\":\\"header\\",\\"networkId\\":\\"25436805\\",\\"adUnit\\":\\"d.thetimes.co.uk\\",\\"contextUrl\\":\\"\\",\\"section\\":\\"\\",\\"sizingMap\\":[{\\"height\\":0,\\"sizes\\":[],\\"width\\":0},{\\"height\\":100,\\"sizes\\":[[320,50],[320,48],[300,50]],\\"width\\":300},{\\"height\\":90,\\"sizes\\":[[728,90]],\\"width\\":768},{\\"height\\":250,\\"sizes\\":[[970,250],[970,90],[728,90]],\\"width\\":1024}],\\"pageTargeting\\":{\\"title\\":\\"This is title\\",\\"label\\":\\"This is label\\"},\\"slotTargeting\\":{\\"section\\":\\"news\\"}},
            platform: \\"native\\",
            window
          }).init();
          </script>
        </body>
      </html>
    ",
          }
        }
      />
    </View>
  </View>
  <View>
    <View>
      <View>
        <Image
          resizeMode="contain"
          source={1}
        />
      </View>
      <Text
        accessible={true}
        allowFontScaling={true}
        ellipsizeMode="tail"
      >
        ADVERTISEMENT
      </Text>
    </View>
  </View>
</View>
`;

exports[`2. Two adverts 1`] = `
<div>
  <View>
    <View>
      <View>
        <RCTWebView
          injectedJavaScript="window.reactBridgePostMessage = window.postMessage; window.postMessage = String(Object.hasOwnProperty).replace('hasOwnProperty', 'postMessage');"
          messagingEnabled={true}
          scalesPageToFit={true}
          source={
            Object {
              "baseUrl": "https://www.thetimes.co.uk/",
              "html": "
      <html>
        <head>
        <meta name=\\"viewport\\" content=\\"width=0,height=0,initial-scale=1,user-scalable=no\\">
        <style>
          html, body {
            height: 100%;
            width: 100%;
            margin: 0;
            padding: 0;
            overflow: hidden;
          }
        </style>
        </head>
        <body>
          <div></div>
          <script>
            (function webviewEventCallbackSetup(options){var window=options.window;window.eventCallback=function(type,detail){window.setTimeout(function(){var method=window.reactBridgePostMessage||window.postMessage;method(JSON.stringify({isTngMessage:true,type:type,detail:detail}),\\"*\\");},300);};window.addEventListener(\\"error\\",function(ev){var file=(ev.filename||\\"\\").substring(0,100);window.eventCallback(\\"error\\",\\"msg=\\"+(ev.message||\\"\\")+\\", file=\\"+file+\\", line=\\"+(ev.lineno||\\"\\")+\\", col=\\"+(ev.colno||\\"\\"));});window.console.error=function(){for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}window.eventCallback(\\"error\\",args.join(\\"\\\\n\\"));};})(window);
          </script>
          <script>
          (function adInit(args){var el=args.el,data=args.data,platform=args.platform,eventCallback=args.eventCallback,window=args.window;var document=window.document,setTimeout=window.setTimeout,Promise=window.Promise;var scriptsInserted={};var initCalled=false;var initialiser={utils:{loadScript:function loadScript(scriptUri,timeout){var _this=this;if(scriptsInserted[scriptUri]){throw new Error(\\"Inserting \\\\\\"\\"+scriptUri+\\"\\\\\\" twice.\\");}scriptsInserted[scriptUri]=true;return new Promise(function(resolve,reject){_this.createScriptElement(scriptUri,function(){resolve();},function(){reject(new Error(\\"load error for \\"+scriptUri));});if(timeout){setTimeout(reject,timeout,new Error(\\"timeout for \\"+scriptUri));}});},createScriptElement:function createScriptElement(scriptUri,onLoad,onError){try{var script=document.createElement(\\"script\\");script.type=\\"text/javascript\\";script.defer=true;if(onLoad)script.addEventListener(\\"load\\",onLoad);if(onError)script.addEventListener(\\"error\\",onError);script.src=scriptUri;document.head.appendChild(script);}catch(e){eventCallback(\\"log\\",\\"Could not insert script \\\\\\"\\"+scriptUri+\\"\\\\\\" (\\"+e+\\") - could be caused by ad blocker\\");}},breakpoints:{small:\\"(max-width: 767px)\\",medium:\\"(min-width: 768px) and (max-width: 1023px)\\",wide:\\"(min-width: 1024px) and (max-width: 1319px)\\",huge:\\"(min-width: 1320px)\\"}},gpt:{setupAsync:function setupAsync(utils){window.googletag=window.googletag||{};window.googletag.cmd=window.googletag.cmd||[];this.scheduleSetPageTargetingValues(data.pageTargeting);this.scheduleAction(function(){var pubads=window.googletag.pubads();pubads.disableInitialLoad();pubads.enableSingleRequest();window.googletag.enableServices();});return utils.loadScript(\\"https://www.googletagservices.com/tag/js/gpt.js\\");},scheduleAction:function scheduleAction(action){window.googletag.cmd.push(action);},scheduleSetPageTargetingValues:function scheduleSetPageTargetingValues(keyValuePairs){this.scheduleAction(function(){var pubads=window.googletag.pubads();Object.keys(keyValuePairs).forEach(function(key){pubads.setTargeting(key,keyValuePairs[key]);});});},doSlotAdSetup:function doSlotAdSetup(){var slotConfig=data.config,networkId=data.networkId,adUnit=data.adUnit,section=data.section,slotTargeting=data.slotTargeting;this.scheduleAction(function(){var adUnitPath=\\"/\\"+networkId+\\"/\\"+adUnit+\\"/\\"+section;var slotName=slotConfig.slotName,sizes=slotConfig.sizes,mappings=slotConfig.mappings;var slot=window.googletag.defineSlot(adUnitPath,sizes,slotName);if(!slot){throw new Error(\\"Ad slot \\"+slotName+\\" \\"+adUnitPath+\\" could not be defined, probably it was already defined\\");}slot.addService(window.googletag.pubads());el.id=\\"wrapper-\\"+slotName;el.innerHTML=\\"<div id=\\\\\\"\\"+slotName+\\"\\\\\\"></div>\\";el.style.display=\\"flex\\";el.style.alignItems=\\"center\\";el.style.justifyContent=\\"center\\";el.style.margin=\\"0 auto\\";el.style.height=\\"100%\\";var gptMapping=window.googletag.sizeMapping();mappings.forEach(function(size){return gptMapping.addSize([size.width,size.height],size.sizes);});slot.defineSizeMapping(gptMapping.build());Object.keys(slotTargeting||[]).forEach(function(key){return slot.setTargeting(key,slotTargeting[key]);});var randomTestingGroup=Math.floor(Math.random()*10).toString();slot.setTargeting(\\"timestestgroup\\",randomTestingGroup);slot.setTargeting(\\"pos\\",slotName);window.googletag.display(slotName);window.googletag.pubads().refresh();});},waitUntilReady:function waitUntilReady(){var _this2=this;return new Promise(function(resolve){return _this2.scheduleAction(function(){resolve();});});},displayAds:function displayAds(){window.googletag.pubads().refresh();},destroySlots:function destroySlots(){window.googletag.destroySlots();}},prebid:{setupAsync:function setupAsync(prebidConfig,utils){this.createPbjsGlobals();var scriptPromises=[utils.loadScript(\\"https://www.thetimes.co.uk/d/js/vendor/prebid.min-4812861170.js\\")];if(prebidConfig.bidders.amazon&&prebidConfig.bidders.amazon.accountId){scriptPromises.push(utils.loadScript(\\"https://c.amazon-adsystem.com/aax2/apstag.js\\"));}return Promise.all(scriptPromises);},createPbjsGlobals:function createPbjsGlobals(){window.pbjs=window.pbjs||{};window.pbjs.que=window.pbjs.que||[];},requestBidsAsync:function requestBidsAsync(prebidConfig,slots,networkId,adUnit,section,gpt){var amazonAccountID=prebidConfig.bidders.amazon&&prebidConfig.bidders.amazon.accountId;var biddingActions=[];window.pbjs.bidderTimeout=prebidConfig.timeout;window.pbjs.bidderSettings=prebidConfig.bidderSettings(prebidConfig);if(amazonAccountID){this.setupApstag(amazonAccountID,prebidConfig.timeout);biddingActions.push(this.scheduleRequestAmazonBids(slots,amazonAccountID,networkId,adUnit,section));}biddingActions.push(gpt.waitUntilReady(),this.requestPrebidBids(slots));return Promise.all(biddingActions);},setupApstag:function setupApstag(amazonAccountID,timeout){window.apstag={init:function init(){this.addToQueue(\\"i\\",arguments);},fetchBids:function fetchBids(){this.addToQueue(\\"f\\",arguments);},setDisplayBids:function setDisplayBids(){},targetingKeys:function targetingKeys(){return[];},addToQueue:function addToQueue(action,d){this._Q.push([action,d]);},_Q:[]};window.apstag.init({pubID:amazonAccountID,adServer:\\"googletag\\",bidTimeout:timeout});},getAmazonConfig:function getAmazonConfig(adSlots,networkId,adUnit,section){var adUnitPathParts=[networkId,adUnit];if(section){adUnitPathParts.push(section);}var adUnitPath=this.getAdUnitPath(adUnitPathParts);return adSlots.map(function(slot){return{slotID:slot.code,slotName:adUnitPath,sizes:slot.sizes};});},getAdUnitPath:function getAdUnitPath(params){return params.reduce(function(acc,cur,index){return index===1?\\"/\\"+acc+\\"/\\"+cur:acc+\\"/\\"+cur;});},scheduleRequestAmazonBids:function scheduleRequestAmazonBids(adsSlots,amazonPudID,networkId,adUnit,section){var _this3=this;return new Promise(function(resolve){var amazonSlots=_this3.getAmazonConfig(adsSlots,networkId,adUnit,section);window.apstag.fetchBids({slots:amazonSlots},function(aBids){resolve(aBids);});});},schedulePrebidAction:function schedulePrebidAction(action){window.pbjs.que.push(action);},setAdUnits:function setAdUnits(adsSlots){this.schedulePrebidAction(function(){adsSlots.forEach(function(slot){return window.pbjs.removeAdUnit(slot.code);});window.pbjs.addAdUnits(adsSlots);});},requestPrebidBids:function requestPrebidBids(slots){var _this4=this;return new Promise(function(resolve){_this4.schedulePrebidAction(function(){_this4.setAdUnits(slots);window.pbjs.requestBids({bidsBackHandler:function bidsBackHandler(bids){resolve(bids);}});});});},applyPrebidTargeting:function applyPrebidTargeting(){window.pbjs.enableSendAllBids();window.pbjs.setTargetingForGPTAsync();},applyAmazonTargeting:function applyAmazonTargeting(){if(window.apstag){window.apstag.setDisplayBids();}}},grapeshot:{setupAsync:function setupAsync(gpt,utils){var grapeshotUrl=\\"https://newscorp.grapeshot.co.uk/thetimes/channels.cgi?url=\\"+encodeURIComponent(data.contextUrl);return utils.loadScript(grapeshotUrl,1000).then(function(){gpt.scheduleSetPageTargetingValues({gs_cat:window.gs_channels});}).catch(function(){});}},doPageAdSetupAsync:function doPageAdSetupAsync(){var _this5=this;var networkId=data.networkId,adUnit=data.adUnit,prebidConfig=data.prebidConfig,section=data.section,slots=data.slots;var parallelActions=[this.gpt.setupAsync(this.utils),this.grapeshot.setupAsync(this.gpt,this.utils)];var enablePrebidding=platform===\\"web\\";if(enablePrebidding){parallelActions.push(this.prebid.setupAsync(prebidConfig,this.utils),this.prebid.requestBidsAsync(prebidConfig,slots,networkId,adUnit,section,this.gpt));}if(platform===\\"web\\"&&window.matchMedia){Object.keys(this.utils.breakpoints).forEach(function(b){window.matchMedia(_this5.utils.breakpoints[b]).addListener(_this5.handleBreakpointChange.bind(_this5,b));});}return Promise.all(parallelActions).then(this.gpt.waitUntilReady.bind(this.gpt)).then(this.finaliseAds.bind(this,enablePrebidding));},handleBreakpointChange:function handleBreakpointChange(breakpoint,mql){var _this6=this;if(mql.matches){this.gpt.scheduleSetPageTargetingValues({breakpoint:breakpoint,refresh:\\"true\\"});this.gpt.scheduleAction(function(){return _this6.gpt.displayAds();});}},finaliseAds:function finaliseAds(enablePrebidding){if(enablePrebidding){this.prebid.applyPrebidTargeting();this.prebid.applyAmazonTargeting();}},destroySlots:function destroySlots(){this.gpt.destroySlots();},init:function init(){if(initCalled){throw new Error(\\"init() has already been called\\");}initCalled=true;if(!window.initCalled){window.initCalled=true;this.doPageAdSetupAsync();}this.gpt.doSlotAdSetup();this.gpt.waitUntilReady().then(function(){eventCallback(\\"renderComplete\\");});}};return initialiser;})({
            el: document.getElementsByTagName(\\"div\\")[0],
            eventCallback: eventCallback,
            data: {\\"config\\":{\\"slotName\\":\\"header\\",\\"sizes\\":[[320,50],[320,48],[300,50]],\\"maxSizes\\":{\\"height\\":50,\\"width\\":320},\\"mappings\\":[{\\"height\\":0,\\"sizes\\":[],\\"width\\":0},{\\"height\\":100,\\"sizes\\":[[320,50],[320,48],[300,50]],\\"width\\":300},{\\"height\\":90,\\"sizes\\":[[728,90]],\\"width\\":768},{\\"height\\":250,\\"sizes\\":[[970,250],[970,90],[728,90]],\\"width\\":1024}]},\\"prebidConfig\\":{\\"bidders\\":{\\"appnexus\\":{\\"placementId\\":\\"5823281\\"},\\"rubicon\\":{\\"accountId\\":\\"14062\\",\\"siteId\\":\\"70608\\",\\"zoneId\\":\\"335918\\"},\\"amazon\\":{\\"accountId\\":\\"3360\\"},\\"indexExchange\\":{\\"siteId\\":\\"188830\\"}},\\"timeout\\":3000,\\"minPrice\\":0.01,\\"maxBid\\":15,\\"bucketSize\\":0.25},\\"slots\\":[{\\"code\\":\\"ad-header\\",\\"sizes\\":[],\\"bids\\":[{\\"bidder\\":\\"appnexus\\",\\"params\\":{\\"placementId\\":\\"5823281\\",\\"section\\":\\"article\\"}},{\\"bidder\\":\\"rubicon\\",\\"params\\":{\\"accountId\\":\\"14062\\",\\"siteId\\":\\"70608\\",\\"zoneId\\":\\"335918\\",\\"inventory\\":{\\"section\\":\\"article\\"}}},{\\"bidder\\":\\"indexExchange\\",\\"params\\":{\\"id\\":\\"ad-header\\",\\"siteID\\":\\"188830\\"}}]},{\\"code\\":\\"ad-article-inline\\",\\"sizes\\":[],\\"bids\\":[{\\"bidder\\":\\"appnexus\\",\\"params\\":{\\"placementId\\":\\"5823281\\",\\"section\\":\\"article\\"}},{\\"bidder\\":\\"rubicon\\",\\"params\\":{\\"accountId\\":\\"14062\\",\\"siteId\\":\\"70608\\",\\"zoneId\\":\\"335918\\",\\"inventory\\":{\\"section\\":\\"article\\"}}},{\\"bidder\\":\\"indexExchange\\",\\"params\\":{\\"id\\":\\"ad-article-inline\\",\\"siteID\\":\\"188830\\"}}]}],\\"slotName\\":\\"header\\",\\"networkId\\":\\"25436805\\",\\"adUnit\\":\\"d.thetimes.co.uk\\",\\"contextUrl\\":\\"\\",\\"section\\":\\"\\",\\"sizingMap\\":[{\\"height\\":0,\\"sizes\\":[],\\"width\\":0},{\\"height\\":100,\\"sizes\\":[[320,50],[320,48],[300,50]],\\"width\\":300},{\\"height\\":90,\\"sizes\\":[[728,90]],\\"width\\":768},{\\"height\\":250,\\"sizes\\":[[970,250],[970,90],[728,90]],\\"width\\":1024}],\\"pageTargeting\\":{\\"title\\":\\"This is title\\",\\"label\\":\\"This is label\\"},\\"slotTargeting\\":{\\"section\\":\\"news\\"}},
            platform: \\"native\\",
            window
          }).init();
          </script>
        </body>
      </html>
    ",
            }
          }
        />
      </View>
    </View>
    <View>
      <View>
        <View>
          <Image
            resizeMode="contain"
            source={1}
          />
        </View>
        <Text
          accessible={true}
          allowFontScaling={true}
          ellipsizeMode="tail"
        >
          ADVERTISEMENT
        </Text>
      </View>
    </View>
  </View>
  <View>
    <View>
      <View>
        <RCTWebView
          injectedJavaScript="window.reactBridgePostMessage = window.postMessage; window.postMessage = String(Object.hasOwnProperty).replace('hasOwnProperty', 'postMessage');"
          messagingEnabled={true}
          scalesPageToFit={true}
          source={
            Object {
              "baseUrl": "https://www.thetimes.co.uk/",
              "html": "
      <html>
        <head>
        <meta name=\\"viewport\\" content=\\"width=0,height=0,initial-scale=1,user-scalable=no\\">
        <style>
          html, body {
            height: 100%;
            width: 100%;
            margin: 0;
            padding: 0;
            overflow: hidden;
          }
        </style>
        </head>
        <body>
          <div></div>
          <script>
            (function webviewEventCallbackSetup(options){var window=options.window;window.eventCallback=function(type,detail){window.setTimeout(function(){var method=window.reactBridgePostMessage||window.postMessage;method(JSON.stringify({isTngMessage:true,type:type,detail:detail}),\\"*\\");},300);};window.addEventListener(\\"error\\",function(ev){var file=(ev.filename||\\"\\").substring(0,100);window.eventCallback(\\"error\\",\\"msg=\\"+(ev.message||\\"\\")+\\", file=\\"+file+\\", line=\\"+(ev.lineno||\\"\\")+\\", col=\\"+(ev.colno||\\"\\"));});window.console.error=function(){for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}window.eventCallback(\\"error\\",args.join(\\"\\\\n\\"));};})(window);
          </script>
          <script>
          (function adInit(args){var el=args.el,data=args.data,platform=args.platform,eventCallback=args.eventCallback,window=args.window;var document=window.document,setTimeout=window.setTimeout,Promise=window.Promise;var scriptsInserted={};var initCalled=false;var initialiser={utils:{loadScript:function loadScript(scriptUri,timeout){var _this=this;if(scriptsInserted[scriptUri]){throw new Error(\\"Inserting \\\\\\"\\"+scriptUri+\\"\\\\\\" twice.\\");}scriptsInserted[scriptUri]=true;return new Promise(function(resolve,reject){_this.createScriptElement(scriptUri,function(){resolve();},function(){reject(new Error(\\"load error for \\"+scriptUri));});if(timeout){setTimeout(reject,timeout,new Error(\\"timeout for \\"+scriptUri));}});},createScriptElement:function createScriptElement(scriptUri,onLoad,onError){try{var script=document.createElement(\\"script\\");script.type=\\"text/javascript\\";script.defer=true;if(onLoad)script.addEventListener(\\"load\\",onLoad);if(onError)script.addEventListener(\\"error\\",onError);script.src=scriptUri;document.head.appendChild(script);}catch(e){eventCallback(\\"log\\",\\"Could not insert script \\\\\\"\\"+scriptUri+\\"\\\\\\" (\\"+e+\\") - could be caused by ad blocker\\");}},breakpoints:{small:\\"(max-width: 767px)\\",medium:\\"(min-width: 768px) and (max-width: 1023px)\\",wide:\\"(min-width: 1024px) and (max-width: 1319px)\\",huge:\\"(min-width: 1320px)\\"}},gpt:{setupAsync:function setupAsync(utils){window.googletag=window.googletag||{};window.googletag.cmd=window.googletag.cmd||[];this.scheduleSetPageTargetingValues(data.pageTargeting);this.scheduleAction(function(){var pubads=window.googletag.pubads();pubads.disableInitialLoad();pubads.enableSingleRequest();window.googletag.enableServices();});return utils.loadScript(\\"https://www.googletagservices.com/tag/js/gpt.js\\");},scheduleAction:function scheduleAction(action){window.googletag.cmd.push(action);},scheduleSetPageTargetingValues:function scheduleSetPageTargetingValues(keyValuePairs){this.scheduleAction(function(){var pubads=window.googletag.pubads();Object.keys(keyValuePairs).forEach(function(key){pubads.setTargeting(key,keyValuePairs[key]);});});},doSlotAdSetup:function doSlotAdSetup(){var slotConfig=data.config,networkId=data.networkId,adUnit=data.adUnit,section=data.section,slotTargeting=data.slotTargeting;this.scheduleAction(function(){var adUnitPath=\\"/\\"+networkId+\\"/\\"+adUnit+\\"/\\"+section;var slotName=slotConfig.slotName,sizes=slotConfig.sizes,mappings=slotConfig.mappings;var slot=window.googletag.defineSlot(adUnitPath,sizes,slotName);if(!slot){throw new Error(\\"Ad slot \\"+slotName+\\" \\"+adUnitPath+\\" could not be defined, probably it was already defined\\");}slot.addService(window.googletag.pubads());el.id=\\"wrapper-\\"+slotName;el.innerHTML=\\"<div id=\\\\\\"\\"+slotName+\\"\\\\\\"></div>\\";el.style.display=\\"flex\\";el.style.alignItems=\\"center\\";el.style.justifyContent=\\"center\\";el.style.margin=\\"0 auto\\";el.style.height=\\"100%\\";var gptMapping=window.googletag.sizeMapping();mappings.forEach(function(size){return gptMapping.addSize([size.width,size.height],size.sizes);});slot.defineSizeMapping(gptMapping.build());Object.keys(slotTargeting||[]).forEach(function(key){return slot.setTargeting(key,slotTargeting[key]);});var randomTestingGroup=Math.floor(Math.random()*10).toString();slot.setTargeting(\\"timestestgroup\\",randomTestingGroup);slot.setTargeting(\\"pos\\",slotName);window.googletag.display(slotName);window.googletag.pubads().refresh();});},waitUntilReady:function waitUntilReady(){var _this2=this;return new Promise(function(resolve){return _this2.scheduleAction(function(){resolve();});});},displayAds:function displayAds(){window.googletag.pubads().refresh();},destroySlots:function destroySlots(){window.googletag.destroySlots();}},prebid:{setupAsync:function setupAsync(prebidConfig,utils){this.createPbjsGlobals();var scriptPromises=[utils.loadScript(\\"https://www.thetimes.co.uk/d/js/vendor/prebid.min-4812861170.js\\")];if(prebidConfig.bidders.amazon&&prebidConfig.bidders.amazon.accountId){scriptPromises.push(utils.loadScript(\\"https://c.amazon-adsystem.com/aax2/apstag.js\\"));}return Promise.all(scriptPromises);},createPbjsGlobals:function createPbjsGlobals(){window.pbjs=window.pbjs||{};window.pbjs.que=window.pbjs.que||[];},requestBidsAsync:function requestBidsAsync(prebidConfig,slots,networkId,adUnit,section,gpt){var amazonAccountID=prebidConfig.bidders.amazon&&prebidConfig.bidders.amazon.accountId;var biddingActions=[];window.pbjs.bidderTimeout=prebidConfig.timeout;window.pbjs.bidderSettings=prebidConfig.bidderSettings(prebidConfig);if(amazonAccountID){this.setupApstag(amazonAccountID,prebidConfig.timeout);biddingActions.push(this.scheduleRequestAmazonBids(slots,amazonAccountID,networkId,adUnit,section));}biddingActions.push(gpt.waitUntilReady(),this.requestPrebidBids(slots));return Promise.all(biddingActions);},setupApstag:function setupApstag(amazonAccountID,timeout){window.apstag={init:function init(){this.addToQueue(\\"i\\",arguments);},fetchBids:function fetchBids(){this.addToQueue(\\"f\\",arguments);},setDisplayBids:function setDisplayBids(){},targetingKeys:function targetingKeys(){return[];},addToQueue:function addToQueue(action,d){this._Q.push([action,d]);},_Q:[]};window.apstag.init({pubID:amazonAccountID,adServer:\\"googletag\\",bidTimeout:timeout});},getAmazonConfig:function getAmazonConfig(adSlots,networkId,adUnit,section){var adUnitPathParts=[networkId,adUnit];if(section){adUnitPathParts.push(section);}var adUnitPath=this.getAdUnitPath(adUnitPathParts);return adSlots.map(function(slot){return{slotID:slot.code,slotName:adUnitPath,sizes:slot.sizes};});},getAdUnitPath:function getAdUnitPath(params){return params.reduce(function(acc,cur,index){return index===1?\\"/\\"+acc+\\"/\\"+cur:acc+\\"/\\"+cur;});},scheduleRequestAmazonBids:function scheduleRequestAmazonBids(adsSlots,amazonPudID,networkId,adUnit,section){var _this3=this;return new Promise(function(resolve){var amazonSlots=_this3.getAmazonConfig(adsSlots,networkId,adUnit,section);window.apstag.fetchBids({slots:amazonSlots},function(aBids){resolve(aBids);});});},schedulePrebidAction:function schedulePrebidAction(action){window.pbjs.que.push(action);},setAdUnits:function setAdUnits(adsSlots){this.schedulePrebidAction(function(){adsSlots.forEach(function(slot){return window.pbjs.removeAdUnit(slot.code);});window.pbjs.addAdUnits(adsSlots);});},requestPrebidBids:function requestPrebidBids(slots){var _this4=this;return new Promise(function(resolve){_this4.schedulePrebidAction(function(){_this4.setAdUnits(slots);window.pbjs.requestBids({bidsBackHandler:function bidsBackHandler(bids){resolve(bids);}});});});},applyPrebidTargeting:function applyPrebidTargeting(){window.pbjs.enableSendAllBids();window.pbjs.setTargetingForGPTAsync();},applyAmazonTargeting:function applyAmazonTargeting(){if(window.apstag){window.apstag.setDisplayBids();}}},grapeshot:{setupAsync:function setupAsync(gpt,utils){var grapeshotUrl=\\"https://newscorp.grapeshot.co.uk/thetimes/channels.cgi?url=\\"+encodeURIComponent(data.contextUrl);return utils.loadScript(grapeshotUrl,1000).then(function(){gpt.scheduleSetPageTargetingValues({gs_cat:window.gs_channels});}).catch(function(){});}},doPageAdSetupAsync:function doPageAdSetupAsync(){var _this5=this;var networkId=data.networkId,adUnit=data.adUnit,prebidConfig=data.prebidConfig,section=data.section,slots=data.slots;var parallelActions=[this.gpt.setupAsync(this.utils),this.grapeshot.setupAsync(this.gpt,this.utils)];var enablePrebidding=platform===\\"web\\";if(enablePrebidding){parallelActions.push(this.prebid.setupAsync(prebidConfig,this.utils),this.prebid.requestBidsAsync(prebidConfig,slots,networkId,adUnit,section,this.gpt));}if(platform===\\"web\\"&&window.matchMedia){Object.keys(this.utils.breakpoints).forEach(function(b){window.matchMedia(_this5.utils.breakpoints[b]).addListener(_this5.handleBreakpointChange.bind(_this5,b));});}return Promise.all(parallelActions).then(this.gpt.waitUntilReady.bind(this.gpt)).then(this.finaliseAds.bind(this,enablePrebidding));},handleBreakpointChange:function handleBreakpointChange(breakpoint,mql){var _this6=this;if(mql.matches){this.gpt.scheduleSetPageTargetingValues({breakpoint:breakpoint,refresh:\\"true\\"});this.gpt.scheduleAction(function(){return _this6.gpt.displayAds();});}},finaliseAds:function finaliseAds(enablePrebidding){if(enablePrebidding){this.prebid.applyPrebidTargeting();this.prebid.applyAmazonTargeting();}},destroySlots:function destroySlots(){this.gpt.destroySlots();},init:function init(){if(initCalled){throw new Error(\\"init() has already been called\\");}initCalled=true;if(!window.initCalled){window.initCalled=true;this.doPageAdSetupAsync();}this.gpt.doSlotAdSetup();this.gpt.waitUntilReady().then(function(){eventCallback(\\"renderComplete\\");});}};return initialiser;})({
            el: document.getElementsByTagName(\\"div\\")[0],
            eventCallback: eventCallback,
            data: {\\"config\\":{\\"slotName\\":\\"intervention\\",\\"sizes\\":[[300,250],[320,50],[320,48],[300,50]],\\"maxSizes\\":{\\"height\\":250,\\"width\\":320},\\"mappings\\":[{\\"height\\":0,\\"sizes\\":[],\\"width\\":0},{\\"height\\":100,\\"sizes\\":[[300,250],[320,50],[320,48],[300,50]],\\"width\\":300},{\\"height\\":90,\\"sizes\\":[[728,90]],\\"width\\":768},{\\"height\\":250,\\"sizes\\":[[970,250],[970,90],[728,90]],\\"width\\":1024}]},\\"prebidConfig\\":{\\"bidders\\":{\\"appnexus\\":{\\"placementId\\":\\"5823281\\"},\\"rubicon\\":{\\"accountId\\":\\"14062\\",\\"siteId\\":\\"70608\\",\\"zoneId\\":\\"335918\\"},\\"amazon\\":{\\"accountId\\":\\"3360\\"},\\"indexExchange\\":{\\"siteId\\":\\"188830\\"}},\\"timeout\\":3000,\\"minPrice\\":0.01,\\"maxBid\\":15,\\"bucketSize\\":0.25},\\"slots\\":[{\\"code\\":\\"ad-header\\",\\"sizes\\":[],\\"bids\\":[{\\"bidder\\":\\"appnexus\\",\\"params\\":{\\"placementId\\":\\"5823281\\",\\"section\\":\\"article\\"}},{\\"bidder\\":\\"rubicon\\",\\"params\\":{\\"accountId\\":\\"14062\\",\\"siteId\\":\\"70608\\",\\"zoneId\\":\\"335918\\",\\"inventory\\":{\\"section\\":\\"article\\"}}},{\\"bidder\\":\\"indexExchange\\",\\"params\\":{\\"id\\":\\"ad-header\\",\\"siteID\\":\\"188830\\"}}]},{\\"code\\":\\"ad-article-inline\\",\\"sizes\\":[],\\"bids\\":[{\\"bidder\\":\\"appnexus\\",\\"params\\":{\\"placementId\\":\\"5823281\\",\\"section\\":\\"article\\"}},{\\"bidder\\":\\"rubicon\\",\\"params\\":{\\"accountId\\":\\"14062\\",\\"siteId\\":\\"70608\\",\\"zoneId\\":\\"335918\\",\\"inventory\\":{\\"section\\":\\"article\\"}}},{\\"bidder\\":\\"indexExchange\\",\\"params\\":{\\"id\\":\\"ad-article-inline\\",\\"siteID\\":\\"188830\\"}}]}],\\"slotName\\":\\"intervention\\",\\"networkId\\":\\"25436805\\",\\"adUnit\\":\\"d.thetimes.co.uk\\",\\"contextUrl\\":\\"\\",\\"section\\":\\"\\",\\"sizingMap\\":[{\\"height\\":0,\\"sizes\\":[],\\"width\\":0},{\\"height\\":100,\\"sizes\\":[[300,250],[320,50],[320,48],[300,50]],\\"width\\":300},{\\"height\\":90,\\"sizes\\":[[728,90]],\\"width\\":768},{\\"height\\":250,\\"sizes\\":[[970,250],[970,90],[728,90]],\\"width\\":1024}],\\"pageTargeting\\":{\\"title\\":\\"This is title\\",\\"label\\":\\"This is label\\"},\\"slotTargeting\\":{\\"section\\":\\"news\\"}},
            platform: \\"native\\",
            window
          }).init();
          </script>
        </body>
      </html>
    ",
            }
          }
        />
      </View>
    </View>
    <View>
      <View>
        <View>
          <Image
            resizeMode="contain"
            source={1}
          />
        </View>
        <Text
          accessible={true}
          allowFontScaling={true}
          ellipsizeMode="tail"
        >
          ADVERTISEMENT
        </Text>
      </View>
    </View>
  </View>
</div>
`;

exports[`3. Advert loading state placeholder 1`] = `
<View>
  <View>
    <View>
      <View>
        <Image
          resizeMode="contain"
          source={1}
        />
      </View>
      <Text
        accessible={true}
        allowFontScaling={true}
        ellipsizeMode="tail"
      >
        ADVERTISEMENT
      </Text>
    </View>
  </View>
</View>
`;
